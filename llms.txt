# cocomo library

## Description

This library contains functions used by the Communication and Collective
Movement (CoCoMo) group and others in the Department for the Ecology of
Animal Societies at the Max Planck Institute of Animal Behavior to
analyze simultaneous tracking data from animal groups. The package is
maintained by Ari Strandburg-Peshkin.

**This package is currently in early development, so accuracy is
definitely not guaranteed - use with caution!**

## Installation

You can install the package by first installing the `devtools` library,
then running:

[`library(devtools)`](https://devtools.r-lib.org/)

`install_github('livingingroups/cocomo')`

## Dataset structure

The library is built for movement (typically GPS) datasets that have a
standardized “matrix format”, containing the following objects:

`xs`: matrix of x coordinates (UTM eastings) of all individuals in a
group or population (rows) at every time point (columns) xs\[i,t\] gives
the x / easting position of individual i at time point t

`ys`: matrix of y coordinates (UTM northings) of all individuals in a
group or population (rows) at every time point (columns) ys\[i,t\] gives
the y / northing position of individual i at time point t

`timestamps`: vector of timestamps corresponding to the columns of xs
and ys matrices. Timestamps must be uniformly sampled, though it is
possible to have gaps (e.g. between different days of recording)

`ids`: data frame giving information about the tracked individuals, with
rows correpsonding to the rows of the xs and ys matrices. There must be
one column called `id_code` which contains a unique individual
identifier for each animal (e.g. for meerkats: `'VCVM001'`, for hyenas:
`'WRTH'`, for coatis: `'Luna'`) The other columns contained are
flexible, and can include information on age, sex, dominance, etc.

Some functions also take in time series of calls. These should be
formatted as a data frame that includes, at a minimum, the following
columns:

`ind_idx`: index of the individual making the call (numeric)

`time_idx`: time index closest to the time at which the call was
produced

`call_type`: string specifying the call type label

`time`: exact time at which the call was produced (synched to UTC time,
including fractions of a second)

Note that times should generally be in UTC, however most functions would
also work with local time. The user should verify that the same time
zone is used for both GPS and audio data.

## Specific datasets

While most functions in this package are intended to be general, it also
contains some functions used for processing data from specific species
datasets maintained by the CoCoMo group / EAS department. These
functions may also interface with the file structure on the EAS data
server. All functions that are species-specific begin with the species
name, e.g. `meerkat_import_GPS_data`. In addition, there are some
species-specific scripts in the scripts folder.

## Code review

Our eventual goal is to have all functions in the package code reviewed
by at least one other person than the person who wrote the code. Code
reviewers are credited in the function documentation under “Author(s)”
(they are indicated as code reviewers). Functions that have not yet been
code reviewed specify “NOT YET CODE REVIEWED” under “Author(s)” in the
documentation. At the time of writing, most functions have no yet been
code reviewed. **If you would like to contribute to this package by code
revieweing any of the functions, please contact Ari.**

## Contributing

If you would like to contribute code to the library, please submit a
pull request, or contact Ari.

## Licensing

This package is distributed under a GNU GPLv3 license. Basically, you
can do almost anything you want with it, except distribute closed-source
versions. See COPYING.txt for the full license.

## Attribution

Please cite this package if you use it:

`cite('cocomo')`

## Style guidelines

To facilitate code review and consistency within the package, we have a
few minimal code style guidelines. Some are required, and some are only
recommended.

### Required

- Code must be indented according to standard practice (e.g. code within
  a `for` loop should be indented)
- Code must be commented such that a reader can tell what it is doing
- Functions must contain documentation in Roxygen format (see existing
  functions for examples)
- Each function must indicate a primary author, as well as a code
  reviewer (or, if no code reviewer, should indicate NOT YET CODE
  REVIEWED)
- Variable and function names should use underscores_between_words
  rather than periods.between.words or CamelCase.
- When using functions from other packages, use `@importFrom` at the top
  to import specific functions rather than the whole package
- When using functions from other packages, call them in the code using
  the package name, e.g. `cocomo::get_group_heading` rather than just
  `get_group_heading`

### Recommended

- Function names should start with a verb (e.g. `get_group_heading`) to
  distinguish them from variables
- Where possible, avoid using lots of external packages
- Avoid tidyverse if possible (sorry, no offense intended!). Edit: I
  have just been informed that stringr and lubridate are part of
  tidyverse, so apparently I am not following this recommendation too
  closely.
- We generally use the US rather than the British spellings of words

# Package index

## All functions

- [`analyze_split_or_merge_event()`](https://livingingroups.github.io/cocomo/reference/analyze_split_or_merge_event.md)
  **\[experimental\]** : Analyze split or merge event

- [`create_trajectories_kml()`](https://livingingroups.github.io/cocomo/reference/create_trajectories_kml.md)
  **\[experimental\]** : Create a KML that shows animal trajectories
  (viewable on Google Earth Pro)

- [`generate_movement_and_calls_visualization()`](https://livingingroups.github.io/cocomo/reference/generate_movement_and_calls_visualization.md)
  **\[experimental\]** : Make a visualization of individual positions
  and calls during a time period specified by the user.

- [`get_angle_between_vectors()`](https://livingingroups.github.io/cocomo/reference/get_angle_between_vectors.md)
  **\[experimental\]** : Get angle between vectors in radians or degrees

- [`get_directedness()`](https://livingingroups.github.io/cocomo/reference/get_directedness.md)
  **\[experimental\]** : Get directedness

- [`get_group_centroid()`](https://livingingroups.github.io/cocomo/reference/get_group_centroid.md)
  **\[stable\]** : Get group centroid

- [`get_group_dyadic_distances()`](https://livingingroups.github.io/cocomo/reference/get_group_dyadic_distances.md)
  **\[experimental\]** : Get group dyadic distances

- [`get_group_elongation()`](https://livingingroups.github.io/cocomo/reference/get_group_elongation.md)
  **\[experimental\]** : Get group polarization

- [`get_group_heading_and_speed()`](https://livingingroups.github.io/cocomo/reference/get_group_heading_and_speed.md)
  **\[stable\]** : Get group heading

- [`get_group_polarization()`](https://livingingroups.github.io/cocomo/reference/get_group_polarization.md)
  **\[experimental\]** : Get group polarization

- [`get_heading_and_speed_spatial()`](https://livingingroups.github.io/cocomo/reference/get_heading_and_speed_spatial.md)
  **\[stable\]** : Get spatially discretized heading and speed over time

- [`get_heading_and_speed_temporal()`](https://livingingroups.github.io/cocomo/reference/get_heading_and_speed_temporal.md)
  **\[stable\]** : Get heading and speed over time (temporal)

- [`get_local_density()`](https://livingingroups.github.io/cocomo/reference/get_local_density.md)
  **\[experimental\]** : Get local density

- [`get_nearest_neighbor_distance()`](https://livingingroups.github.io/cocomo/reference/get_nearest_neighbor_distance.md)
  **\[experimental\]** : Get nearest neighbor distance

- [`get_position_relative_to_group()`](https://livingingroups.github.io/cocomo/reference/get_position_relative_to_group.md)
  **\[experimental\]** : Get positions relative to group

- [`get_pulls_and_anchors()`](https://livingingroups.github.io/cocomo/reference/get_pulls_and_anchors.md)
  **\[experimental\]** : Get pulls and anchors

- [`get_pulls_and_anchors_with_NA()`](https://livingingroups.github.io/cocomo/reference/get_pulls_and_anchors_with_NA.md)
  **\[experimental\]** :

  Wrapper for `get_pulls_and_anchors` function, handling datasets with
  NAs

- [`get_spatially_discretized_trajectories()`](https://livingingroups.github.io/cocomo/reference/get_spatially_discretized_trajectories.md)
  **\[experimental\]** : Get spatially discretized trajectories

- [`get_speed()`](https://livingingroups.github.io/cocomo/reference/get_speed.md)
  **\[stable\]** : Get speed

- [`get_together_sticky()`](https://livingingroups.github.io/cocomo/reference/get_together_sticky.md)
  **\[experimental\]** : Get whether two individuals are together, using
  a "sticky" definition

- [`get_turn_and_speed_influence_simplified()`](https://livingingroups.github.io/cocomo/reference/get_turn_and_speed_influence_simplified.md)
  **\[stable\]** : Get simplified turn and speed influence

- [`identify_splits_and_merges()`](https://livingingroups.github.io/cocomo/reference/identify_splits_and_merges.md)
  **\[stable\]** : Identify group splits and merges from
  multi-individual trajectory data

- [`import_axytrek_gps_file()`](https://livingingroups.github.io/cocomo/reference/import_axytrek_gps_file.md)
  **\[experimental\]** : Import Axy-Trek GPS file

- [`import_behavioral_seqs_to_matrix()`](https://livingingroups.github.io/cocomo/reference/import_behavioral_seqs_to_matrix.md)
  **\[experimental\]** : Import behavioral sequences (output from
  classifier) to matrix format

- [`latlon_to_utm()`](https://livingingroups.github.io/cocomo/reference/latlon_to_utm.md)
  **\[experimental\]** : Latitude / longitude to UTM conversion

- [`meerkat_auto_label_synch_times()`](https://livingingroups.github.io/cocomo/reference/meerkat_auto_label_synch_times.md)
  : Auto label synch times Automatic labeling of synch calls that are
  not labeled with a time, assuming they should be close to multiples of
  90 sec apart File must have at least one fully labeled synch - and
  make sure this is correct! TODO: add more details on how this works
  here TODO: change max drift to be per time in file instead of absolute

- [`meerkat_check_data_availability_sheet()`](https://livingingroups.github.io/cocomo/reference/meerkat_check_data_availability_sheet.md)
  **\[experimental\]** : Check meerkat data availability sheets for any
  inconsistencies or errors

- [`meerkat_compare_gps_data_to_recording_intervals()`](https://livingingroups.github.io/cocomo/reference/meerkat_compare_gps_data_to_recording_intervals.md)
  **\[experimental\]** : Compare recorded meerkat GPS data to recording
  intervals noted in metadata

- [`meerkat_import_meerkat_gps_data()`](https://livingingroups.github.io/cocomo/reference/meerkat_import_meerkat_gps_data.md)
  **\[experimental\]** : Import meerkat GPS data

- [`meerkat_synch_audio_file_labels_to_UTC()`](https://livingingroups.github.io/cocomo/reference/meerkat_synch_audio_file_labels_to_UTC.md)
  **\[experimental\]** : Synch labels within audio file to UTC time

- [`parse_audition_time()`](https://livingingroups.github.io/cocomo/reference/parse_audition_time.md)
  **\[experimental\]** : Parse Adobe Audition formatted time

- [`plot_behav_and_calls()`](https://livingingroups.github.io/cocomo/reference/plot_behav_and_calls.md)
  **\[experimental\]** : Plot individual behavior and calls during a
  time period specified by the user.

- [`plot_network_matrix()`](https://livingingroups.github.io/cocomo/reference/plot_network_matrix.md)
  **\[experimental\]** : Plot network matrix

- [`plot_pull_or_anchor_event()`](https://livingingroups.github.io/cocomo/reference/plot_pull_or_anchor_event.md)
  **\[experimental\]** : Plot pull or anchor event

- [`plot_y_conditioned_on_x()`](https://livingingroups.github.io/cocomo/reference/plot_y_conditioned_on_x.md)
  **\[experimental\]** : Plot a statistic of y conditioned on the value
  of x

- [`preprocess_gps_level0_to_level1()`](https://livingingroups.github.io/cocomo/reference/preprocess_gps_level0_to_level1.md)
  **\[experimental\]** : Preprocess GPS data (in matrix format) from
  level 0 to level 1

- [`reformat_matrix_to_df()`](https://livingingroups.github.io/cocomo/reference/reformat_matrix_to_df.md)
  **\[experimental\]** : Convert from matrix format to dataframe

- [`reformat_movebank_to_matrix()`](https://livingingroups.github.io/cocomo/reference/reformat_movebank_to_matrix.md)
  **\[experimental\]** : Reformat Movebank to matrix format

- [`utm_to_latlon()`](https://livingingroups.github.io/cocomo/reference/utm_to_latlon.md)
  **\[experimental\]** : UTM to latitude / longitude conversion

