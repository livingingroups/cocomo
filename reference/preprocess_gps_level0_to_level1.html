<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Preprocess GPS data (in matrix format) from level 0 to level 1 — preprocess_gps_level0_to_level1 • cocomo</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Preprocess GPS data (in matrix format) from level 0 to level 1 — preprocess_gps_level0_to_level1"><meta name="description" content="This function takes in a level 0 dataset (uncleaned location data in UTM coordinates) and performs minimal
pre-processing to return a level 1 dataset. See latlon_to_utm to convert from lat/lon to UTM."><meta property="og:description" content="This function takes in a level 0 dataset (uncleaned location data in UTM coordinates) and performs minimal
pre-processing to return a level 1 dataset. See latlon_to_utm to convert from lat/lon to UTM."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cocomo</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Preprocess GPS data (in matrix format) from level 0 to level 1</h1>

      <div class="d-none name"><code>preprocess_gps_level0_to_level1.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes in a level 0 dataset (uncleaned location data in UTM coordinates) and performs minimal
pre-processing to return a level 1 dataset. See <a href="latlon_to_utm.html">latlon_to_utm</a> to convert from lat/lon to UTM.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">preprocess_gps_level0_to_level1</span><span class="op">(</span></span>
<span>  input_file_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_file_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ys <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timestamps <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  breaks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  remove_unrealistic_speeds <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  remove_isolated_points <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  remove_unrealistic_locations <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  interpolate_small_gaps <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  interpolate_stationary_periods <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  max_speed_percentile <span class="op">=</span> <span class="fl">0.9995</span>,</span>
<span>  max_speed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_sd_away <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  max_dist_percentile <span class="op">=</span> <span class="fl">0.9999</span>,</span>
<span>  max_isolated_point_dist <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  max_interp_len <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  max_move_dist <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  max_move_time <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  bounding_box <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">T</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input-file-path">input_file_path<a class="anchor" aria-label="anchor" href="#arg-input-file-path"></a></dt>
<dd><p>full path to the input file containing <code>xs</code>, <code>ys</code>, <code>timestamps</code>, and <code>ids</code> (overrides manual passing in of these parameters), must be an RData file</p></dd>


<dt id="arg-output-file-path">output_file_path<a class="anchor" aria-label="anchor" href="#arg-output-file-path"></a></dt>
<dd><p>full path to the output file where the level 1 dataset will be stored, must end in .RData</p></dd>


<dt id="arg-xs">xs<a class="anchor" aria-label="anchor" href="#arg-xs"></a></dt>
<dd><p><code>n_inds x n_times</code> matrix giving x coordinates (in UTM eastings) of each individual over time (if an input file is not specified, pass this in manually)</p></dd>


<dt id="arg-ys">ys<a class="anchor" aria-label="anchor" href="#arg-ys"></a></dt>
<dd><p><code>n_inds x n_times</code> matrix giving y coordinates (in UTM northings) of each individual over time (if an input file is not specified, pass this in manually)</p></dd>


<dt id="arg-timestamps">timestamps<a class="anchor" aria-label="anchor" href="#arg-timestamps"></a></dt>
<dd><p>vector of timestamps (if an input file is not specified, pass this in manually)</p></dd>


<dt id="arg-ids">ids<a class="anchor" aria-label="anchor" href="#arg-ids"></a></dt>
<dd><p>data frame containing information about each individual (if an input file is not specified, pass this in manually)</p></dd>


<dt id="arg-breaks">breaks<a class="anchor" aria-label="anchor" href="#arg-breaks"></a></dt>
<dd><p>vector giving indexes to breaks in the data (e.g. gaps between recording intervals), if the sequence is not continuous. breaks should specify the index associated with the beginning of each interval, starting with 1 (the first interval)</p></dd>


<dt id="arg-remove-unrealistic-speeds">remove_unrealistic_speeds<a class="anchor" aria-label="anchor" href="#arg-remove-unrealistic-speeds"></a></dt>
<dd><p>whether to remove unrealistic speeds (<code>T</code> or <code>F</code>)</p></dd>


<dt id="arg-remove-isolated-points">remove_isolated_points<a class="anchor" aria-label="anchor" href="#arg-remove-isolated-points"></a></dt>
<dd><p>whether to remove isolated points (<code>T</code> or <code>F</code>)</p></dd>


<dt id="arg-remove-unrealistic-locations">remove_unrealistic_locations<a class="anchor" aria-label="anchor" href="#arg-remove-unrealistic-locations"></a></dt>
<dd><p>whether to remove unrealistic locations (<code>T</code> or <code>F</code>)</p></dd>


<dt id="arg-interpolate-small-gaps">interpolate_small_gaps<a class="anchor" aria-label="anchor" href="#arg-interpolate-small-gaps"></a></dt>
<dd><p>whether to interpolate small gaps (<code>T</code> or <code>F</code>)</p></dd>


<dt id="arg-interpolate-stationary-periods">interpolate_stationary_periods<a class="anchor" aria-label="anchor" href="#arg-interpolate-stationary-periods"></a></dt>
<dd><p>whether to interpolate stationary periods (<code>T</code> or <code>F</code>) - cannot be run unless <code>interpolate_small_gaps</code> is also <code>T</code></p></dd>


<dt id="arg-max-speed-percentile">max_speed_percentile<a class="anchor" aria-label="anchor" href="#arg-max-speed-percentile"></a></dt>
<dd><p>quantile to use to define the maximum speed</p></dd>


<dt id="arg-max-speed">max_speed<a class="anchor" aria-label="anchor" href="#arg-max-speed"></a></dt>
<dd><p>maximum speed (overrides max_speed_percentile if specified). This value is interpreted as the max allowable meters traveled in one time step in <code>timesteps</code>.</p></dd>


<dt id="arg-max-sd-away">max_sd_away<a class="anchor" aria-label="anchor" href="#arg-max-sd-away"></a></dt>
<dd><p>standard deviation of xs and ys distributions for each individual beyond which points will be removed</p></dd>


<dt id="arg-max-dist-percentile">max_dist_percentile<a class="anchor" aria-label="anchor" href="#arg-max-dist-percentile"></a></dt>
<dd><p>quantile to use to define the maximum x and y coordinates of points to check for isolation (those outside and isolated will be removed)</p></dd>


<dt id="arg-max-isolated-point-dist">max_isolated_point_dist<a class="anchor" aria-label="anchor" href="#arg-max-isolated-point-dist"></a></dt>
<dd><p>maximum isolated point distance</p></dd>


<dt id="arg-max-interp-len">max_interp_len<a class="anchor" aria-label="anchor" href="#arg-max-interp-len"></a></dt>
<dd><p>maximum length of an <code>NA</code> gap to linearly interpolate (number of time points)</p></dd>


<dt id="arg-max-move-dist">max_move_dist<a class="anchor" aria-label="anchor" href="#arg-max-move-dist"></a></dt>
<dd><p>maximum distance moved during a time <code>max_move_time</code> to be considered stationary during interpolation of stationary periods (interpolated using the average position)</p></dd>


<dt id="arg-max-move-time">max_move_time<a class="anchor" aria-label="anchor" href="#arg-max-move-time"></a></dt>
<dd><p>maximum time of a gap to interpolate if stationary (number of time points)</p></dd>


<dt id="arg-bounding-box">bounding_box<a class="anchor" aria-label="anchor" href="#arg-bounding-box"></a></dt>
<dd><p>vector of length 4 giving a bounding box outside of which points will be removed - should be in the format <code>c(min_easting, max_easting, min_northing, max_northing)</code></p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>whether to print out progress and information</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a list containing new <code>xs</code> and <code>ys</code> matrices, and also saves them plus the <code>timestamps</code> and <code>ids</code> objects to an output file if specified</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs the following steps (in order):</p><ol><li><p>If <code>remove_isolated_points = T</code>, finds extreme distances <code>&gt; max_dist_percentile</code> quantile (default 99.99%) or <code>&lt; 1 - max_dist_percentile</code> of <code>xs</code> or <code>ys</code> for each individual and, if there are no other points from that individual within <code>max_isolated_point_dist</code> (default 1000 m) of that point, replaces them with <code>NA</code>s</p></li>
<li><p>If <code>remove_unrealistic_speeds = T</code>, removes unrealistic speeds (greater than <code>max_speed_percentile</code>) and replaces them with NAs (default .9995 quantile, or alternatively a max speed <code>max_speed</code> can be set manually).</p></li>
<li><p>If <code>remove_unrealistic_locations = T</code>, finds extreme xs and ys above <code>mean + sd * max_sd_away</code> (default 10) for each ind and removes those</p></li>
<li><p>If <code>bounding_box != NULL</code>, removes all points outside of a specified <code>bounding_box = c(min_easting, max_easting, min_northing, max_northing)</code></p></li>
<li><p>If <code>interpolate_small_gaps = T</code>, fills in missing data gaps less than length <code>max_interp_len</code> with linear interpolation (default 5)</p></li>
<li><p>If <code>interpolate_stationary_periods = T</code>, finds instances where an animal did not move more than <code>max_move_dist</code> (default 5 m) during an <code>NA</code> gap of <code>&lt; max_move_time</code> (default 300 timesteps) and replaces
them with the mean location of the individual between start and end of the sequence</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Ariana Strandburg-Peshkin (primary author)</p>
<p>NOT YET CODE REVIEWED</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ariana Strandburg-Peshkin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

